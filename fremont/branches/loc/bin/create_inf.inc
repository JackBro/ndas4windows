!IFDEF POST_BUILD_CMD
!MESSAGE BUILDMSG: create_inf.inc cannot used with POST_BUILD_CMD defined
!ENDIF

#
# INF File Generation
#
!IFNDEF INFNAME
INFNAME=$(TARGETNAME)
!ENDIF

!IFNDEF INF_TEMPLATE_EXT
INF_TEMPLATE_EXT=inf
!ENDIF

!IF EXISTS ($(INFNAME).$(TARGET_DIRECTORY).$(INF_TEMPLATE_EXT))
INF_TEMPLATE=$(INFNAME).$(TARGET_DIRECTORY)
!ELSE IF EXISTS ($(INFNAME).$(INF_TEMPLATE_EXT))
INF_TEMPLATE=$(INFNAME)
!ELSE IF EXISTS (..\$(INFNAME).$(TARGET_DIRECTORY).$(INF_TEMPLATE_EXT))
INF_TEMPLATE=..\$(INFNAME).$(TARGET_DIRECTORY)
!ELSE IF EXISTS (..\$(INFNAME).$(INF_TEMPLATE_EXT))
INF_TEMPLATE=..\$(INFNAME)
!ENDIF

!IFDEF INF_TEMPLATE
POST_BUILD_CMD=$(NDAS_TOOLS)\setinfver $(O)\$(TARGETNAME).$(TARGETEXT) $(INF_TEMPLATE).$(INF_TEMPLATE_EXT) $(O)\$(INFNAME).inf
BINPLACE_FLAGS=$(BINPLACE_FLAGS) $(O)\$(INFNAME).inf
!ELSE
!MESSAGE BUILDMSG: WARNING $(INFNAME).inf does not exist
!ENDIF
