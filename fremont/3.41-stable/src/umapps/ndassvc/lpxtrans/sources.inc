C_DEFINES=/DUNICODE /D_UNICODE
INCLUDES=..\inc;$(NDAS_INC_PATH);$(NDAS_PUBLIC_INC_PATH);$(PSDK_INC_PATH)
RCOPTIONS=/i $(PSDK_INC_PATH)
USECXX_FLAG=/Tp
USE_NATIVE_EH=1

!IF $(FREEBUILD)
USE_MSVCRT=1
MSC_OPTIMIZATION=/Ox
!ELSE
USE_LIBCMT=1
DEBUG_CRTS=1
!ENDIF

MSC_WARNING_LEVEL=-W3 -Wp64

# publish lib files to the project root
PASS1_PUBLISH= {$(O)\$(TARGETNAME).lib=$(NDAS_LIB_PATH)\$(TARGETNAME).lib}

SOURCES=\
    ..\lpxtrans.cpp \
    ..\lpxcs.cpp

!IFDEF ENABLE_WPP
!IF $(FREEBUILD)
!IF $(_NT_TARGET_VERSION) <= 0x500
WPP_TEMPLATE=um-w2k.tpl
!ELSE
WPP_TEMPLATE=um-default.tpl
!ENDIF

RUN_WPP=$(SOURCES) -um -gen:{$(WPP_TEMPLATE)}*.tmh \
	-func:XTLTRACE{FLAG=xtlTraceGeneric,LEVEL=TRACE_LEVEL_ERROR}(MSG,...) \
	-func:XTLTRACE1{FLAG=xtlTraceGeneric}(LEVEL,MSG,...) \
	-func:XTLTRACE2(FLAG,LEVEL,MSG,...)
!ENDIF
!ENDIF
