TARGETNAME=ndupdate
TARGETTYPE=PROGRAM
TARGETPATH=obj

INCLUDES=..;$(NDAS_INC_PATH);$(NDAS_INC_PATH)\ndas;$(PSDK_INC_PATH)

MSC_WARNING_LEVEL=-W3 -WX

UMTYPE=console
UMENTRY=wmain
C_DEFINES=/DUNICODE /D_UNICODE
RC_OPTIONS=/i $(NDAS_INC_PATH)
USER_C_FLAGS=/Wp64

!IF $(FREEBUILD)
USE_MSVCRT=1
LINKER_NOREF=1
!ELSE
USE_LIBCMT=1
DEBUG_CRTS=1
!ENDIF

#MSC_WARNING_LEVEL=-W3 -WX
#MSC_OPTIMIZATION=/Oitb2
MSC_OPTIMIZATION=/Od /Oi

#PRECOMPILED_INCLUDE=stdafx.h
#PRECOMPILED_CXX=1

TARGETLIBS= \
	$(PSDK_LIB_PATH)\kernel32.lib \
	$(PSDK_LIB_PATH)\user32.lib \
	$(PSDK_LIB_PATH)\urlmon.lib \
	$(PSDK_LIB_PATH)\wininet.lib

NDUPDATE_LINK_AS_DLL=1

!IFDEF NDUPDATE_LINK_AS_DLL

BUILD_CONSUMES=ndupdate_dll
TARGETLIBS=$(TARGETLIBS) \
	$(NDAS_LIB_PATH)\ndupdate_dll.lib

C_DEFINES=$(C_DEFINES) /DNDUPDATE_LINK_AS_DLL /DNDUPDATE_DLL_IMPORTS

!ELSE

BUILD_CONSUMES=ndupdate

!ENDIF	
	
SOURCES_USED=..\sources.inc

X_USE_WTL_71=1
USE_STATIC_ATL=1
ATL_MIN_CRT=1
# Be sure to include "xmatl.mk" after TAGETLIBS,
# as xmatl.mk will provide more TAGETLIBS
!INCLUDE ..\xmatl.mk

SOURCES= \
	apitest.cpp
