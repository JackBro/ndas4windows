TARGETNAME=ndupdate
TARGETTYPE=PROGRAM
TARGETPATH=obj

INCLUDES=..;$(NDAS_INC_PATH);$(NDAS_INC_PATH)\ndas;$(PSDK_INC_PATH)

UMTYPE=console
UMENTRY=wmain
C_DEFINES=/DUNICODE /D_UNICODE
RC_OPTIONS=/i $(NDAS_INC_PATH)

MSC_WARNING_LEVEL=-W3 -WX -Wp64
MSC_OPTIMIZATION=/Od /Oi

!IF $(FREEBUILD)
USE_MSVCRT=1
LINKER_NOREF=1
!ELSE
USE_LIBCMT=1
DEBUG_CRTS=1
!ENDIF

TARGETLIBS= \
	$(PSDK_LIB_PATH)\kernel32.lib \
	$(PSDK_LIB_PATH)\user32.lib \
	$(PSDK_LIB_PATH)\urlmon.lib \
	$(PSDK_LIB_PATH)\wininet.lib

# To use ndupdate.dll
BUILD_CONSUMES=ndupdate
TARGETLIBS=$(TARGETLIBS) \
	$(NDAS_LIB_PATH)\ndupdate.lib
C_DEFINES=$(C_DEFINES) /DNDUPDATE_LINK_AS_DLL /DNDUPDATE_DLL_IMPORTS

# Otherwise
#BUILD_CONSUMES=libndupdate

SOURCES_USED=..\sources.inc

USE_STATIC_ATL=1
USE_WTL=1
ATL_MIN_CRT=1

SOURCES= \
	apitest.cpp
