TARGETNAME=libndask
TARGETTYPE=DRIVER_LIBRARY
TARGETPATH=obj

BUILD_PRODUCES=libndask

NDASBOOT=ndasboot
LOADER=loader
MULTIBOOT=multiboot

MSC_WARNING_LEVEL=-W3 -WX -Wp64

C_DEFINES = -DUNICODE $(C_DEFINES)
#C_DEFINES = -D__NDASCHIP20_ALPHA_SUPPORT__ $(C_DEFINES) 
#C_DEFINES = -D__SPINLOCK_DEBUG__ $(C_DEFINES) 
#C_DEFINES = -D__DETECT_CABLE80__ $(C_DEFINES) 
C_DEFINES = -D__BSRECORDER_HACK__ $(C_DEFINES)
#C_DEFINES = -D__DVD_ENCRYPT_CONTENT__ $(C_DEFINES)
#C_DEFINES = -D__ENABLE_CONTENTENCRYPT_AES_TEST__ $(C_DEFINES)
#C_DEFINES = -D__ENABLE_PERFORMACE_CHECK__ $(C_DEFINES)
#C_DEFINES = -D__ENABLE_LOCKED_READ__ $(C_DEFINES)

!IF	$(FREEBUILD)
MSC_OPTIMIZATION=/O2
!ENDIF


INCLUDES=$(NDAS_DRIVER_INC_PATH);$(NDAS_DRIVER_INC_PATH)\kernel;$(NDAS_INC_PATH)

SOURCES= lsccb.c \
		lslurn.c \
		lslurnassoc.c \
		lslurnIde.c \
		lslurnIdedisk.c \
		lslurnIdeodd.c \
		lsproto.c \
		lsprotoide.c \
		lstransport.c \
		kdebug.c \
		lsutils.c \
		cipher.c \
		devreg.c \
		repos.c
		
PASS1_PUBLISH= {$(O)\$(TARGETNAME).lib=$(NDAS_DRIVER_LIB_PATH)\$(TARGETNAME).lib}

#C_DEFINES=$(C_DEFINES) -D__NDFS__

!IFDEF NDASBOOT
C_DEFINES = -D__NDASBOOT__ $(C_DEFINES)

!IFDEF LOADER
C_DEFINES = -D__ENABLE_LOADER__ $(C_DEFINES)
!ENDIF

!ENDIF

!IFDEF MULTIBOOT
C_DEFINES = -D__DEVIDED_MULTI_BOOT__ $(C_DEFINES)
!ENDIF